(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e),t.d(e,{TokenRequest:()=>f});const n=flarum.core.compat["admin/app"];var r=t.n(n);const o=flarum.core.compat["common/components/Switch"];var s=t.n(o);function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}const i=flarum.core.compat["common/app"];var l=t.n(i);const d=flarum.core.compat["common/Component"];var c=t.n(d);const u=flarum.core.compat["common/components/LoadingIndicator"];var p=t.n(u),f=function(t){var e,n;function r(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).sending=!1,e.sent=!1,e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var o=r.prototype;return o.view=function(){return m(".PasswordlessTokenRequest",[m(".PasswordlessTokenRequest-send",[l().translator.trans("clarkwinkelmann-passwordless.lib.token-request."+(this.sent?"sent":"send"),{a:m("a",{onclick:this.requestPasswordlessToken.bind(this),disabled:this.sending})}),this.sending?[" ",p().component({display:"inline",size:"small"})]:null]),this.attrs.additionalText?m(".PasswordlessTokenRequest-more",this.attrs.additionalText):null])},o.requestPasswordlessToken=function(t){var e=this;t.preventDefault(),this.sending=!0,l().request({method:"POST",url:l().forum.attribute("apiUrl")+"/passwordless-request",body:{oneTimeToken:!0},errorHandler:this.attrs.errorHandler}).then((function(){e.sending=!1,e.sent=!0,e.attrs.onErrorClear&&e.attrs.onErrorClear(),m.redraw()})).catch((function(t){throw e.sending=!1,m.redraw(),t}))},r}(c()),g="passwordless.",h="clarkwinkelmann-passwordless.admin.settings.";r().initializers.add("clarkwinkelmann-passwordless",(function(){r().extensionData.for("clarkwinkelmann-passwordless").registerSetting((function(){var t=this;return[m(".Form-group",[s().component({state:"1"===this.setting(g+"passwordlessLoginByDefault","1")(),onchange:function(e){t.setting(g+"passwordlessLoginByDefault")(e?"1":"0")}},r().translator.trans(h+"passwordless-login-by-default"))]),m(".Form-group",[s().component({state:"1"===this.setting(g+"hideSignUpPassword","1")(),onchange:function(e){t.setting(g+"hideSignUpPassword")(e?"1":"0")}},r().translator.trans(h+"hide-sign-up-password"))]),m(".Form-group",[m("label",r().translator.trans(h+"token-life")),m("input.FormControl",{type:"number",bidi:this.setting(g+"tokenLifeInMinutes",5)})])]}))}))})(),module.exports=e})();
//# sourceMappingURL=admin.js.map