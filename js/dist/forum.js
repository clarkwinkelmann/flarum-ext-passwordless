module.exports=function(e){var t={};function s(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=6)}([function(e,t){e.exports=flarum.core.compat["forum/app"]},function(e,t){e.exports=flarum.core.compat["common/extend"]},function(e,t){e.exports=flarum.core.compat["forum/components/LogInModal"]},,,function(e,t){e.exports=flarum.core.compat["forum/components/SignUpModal"]},function(e,t,s){"use strict";s.r(t);var r=s(1),o=s(0),n=s.n(o),i=s(2),a=s.n(i),d=s(5),l=s.n(d),p="clarkwinkelmann-passwordless.forum.sign-up.";n.a.initializers.add("clarkwinkelmann-passwordless",(function(){Object(r.extend)(a.a.prototype,"oninit",(function(){this.passwordlessTokenSent=!1,this.passwordlessSkip=!n.a.forum.attribute("passwordless.passwordlessLoginByDefault")})),Object(r.extend)(a.a.prototype,"fields",(function(e){this.passwordlessTokenSent?(e.add("passwordless",m("p",n.a.translator.trans(p+"link-sent",{a:m("a",{onclick:this.requestPasswordlessToken.bind(this)})})),100),e.has("identification")&&e.remove("identification"),e.has("remember")&&e.remove("remember"),e.has("submit")&&e.remove("submit")):this.passwordlessSkip||e.add("passwordless",m("p",n.a.translator.trans(p+"how-it-works")),-100),this.passwordlessSkip||(e.has("password")&&e.remove("password"),e.has("identification")&&e.get("identification")&&Array.isArray(e.get("identification").children)&&e.get("identification").children.forEach((function(e){e&&e.attrs&&"identification"===e.attrs.name&&(e.attrs.placeholder=n.a.translator.trans(p+"email"),e.attrs.type="email")})))})),Object(r.extend)(a.a.prototype,"footer",(function(e){var t=this;!this.passwordlessSkip&&Array.isArray(e)&&e.length&&e[0]&&e[0].attrs&&"LogInModal-forgotPassword"===e[0].attrs.className&&e.splice(0,1),e.push(m("p",n.a.translator.trans(p+(this.passwordlessSkip?"login-without-password":"login-with-password"),{a:m("a",{onclick:function(){t.passwordlessSkip=!t.passwordlessSkip,t.passwordlessTokenSent=!1}})})))})),a.a.prototype.requestPasswordlessToken=function(e){var t=this;e.preventDefault(),this.loading=!0,n.a.request({method:"POST",url:n.a.forum.attribute("apiUrl")+"/passwordless-request",body:{identification:this.identification(),remember:this.remember()},errorHandler:this.onerror.bind(this)}).then((function(){t.passwordlessTokenSent=!0,t.loaded()}),this.loaded.bind(this))},Object(r.override)(a.a.prototype,"onsubmit",(function(e,t){if(this.passwordlessSkip)return e(t);this.requestPasswordlessToken(t)})),Object(r.extend)(l.a.prototype,"fields",(function(e){n.a.forum.attribute("passwordless.hideSignUpPassword")&&e.has("password")&&e.remove("password")}))}))}]);
//# sourceMappingURL=forum.js.map